<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="team.bishe.wms.mapper.DetailedEntryMapper">


    <select id="selectRandom" resultType="team.bishe.wms.bean.DetailedEntry">
        select
            t.in_ws_id as detailedEntryId,
            t.customer_id as customerId,
            t.tray_id as pallet,
            (select w.good_name from t_shstock_in_application w where w.application_id = t.detail_application_id) as goodsName,
            (select w.good_type from t_shstock_in_application w where w.application_id = t.detail_application_id) as goodsSize,
            t.checkid as checkerId,
            t.storekeeperid as storekeeperId,
            (select s.number from t_shstock_in_application s where  s.application_id = t.detail_application_id) as initialNumber,
            t.current_num as currentNumber,
            t.update_date as LastTime

        from
            t_shstock_in_detail t
        where 1=1
        <if test="param1 != null and param1 !=''" >and in_ws_id = #{param1}</if>
        <if test="param2 != null and param2 !=''">and customer_id = #{param2}</if>
        <if test="param3 != null and param3 !='' and param4 != null and param4 !=''">and create_date between  #{param3}  and #{param4}</if>
    </select>

    <select id="selectById" resultType="team.bishe.wms.bean.DetailedEntry">
        select
                in_ws_id,
                detail_application_id,
                CUSTOMER_ID,
				create_date,
				whouse_id
        from
            t_shstock_in_detail
        where
            detail_application_id = #{applicationId}

    </select>

    <insert id="insertByApp">
        insert into t_shstock_in_detail(
                in_ws_id,
                detail_application_id,
                CUSTOMER_ID,
				create_date,
				whouse_id,
				package_num)
		values (#{id},#{id},#{cusId},#{applicationDate},#{repositoryId},#{number})
    </insert>


    <update id="updateById">
        update t_shstock_in_detail
        set whouse_id = #{param2}
        where in_ws_id = #{param1}
    </update>

    <update id="updateState">
    </update>

    <delete id="deleteById">
        delete from t_shstock_in_detail where in_ws_id = #{detailedEntryId}
    </delete>
</mapper>
