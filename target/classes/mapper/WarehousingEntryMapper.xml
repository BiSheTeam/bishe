<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="team.bishe.wms.mapper.WarehousingEntryMapper">


    <select id="selectRandom" resultType="team.bishe.wms.bean.WarehousingEntry">
        select
            in_ws_no as id,
            customer_name as customerName,
            account_man as accountMan,
            create_date as applicationDate,
            in_storageCost as storageCost,
            in_laborCost as laborCost,
            in_otherCost as otherCost,
            in_payment as payment,
            status as status,
            totalCost as totalCost
        from t_shstock_in
        where 1=1
            <if test="param1 != null and param1 !=''" >and in_ws_no = #{param1}</if>
            <if test="param2 != null and param2 !=''">and customer_id = #{param2}</if>
            <if test="param3 != null and param3 !='' and param4 != null and param4 !=''">and create_date between #{param3} and #{param4}</if>
    </select>

    <select id="selectById" resultType="team.bishe.wms.bean.WarehousingEntry">
        select
            in_ws_no as id,
            customer_name as customerName,
            create_date as applicationDate,
            status as status
        from t_shstock_in
        where in_application_id = #{applicationId}
    </select>

    <insert id="insertByApp">
        insert into t_shstock_in(
                in_ws_no,
                CUSTOMER_ID,
				CUSTOMER_NAME,
				create_date,
				whouse_id,
				in_application_id)
		values (#{id},#{cusId},#{cusName},#{applicationDate},#{repositoryId},#{id})

    </insert>

    <update id="updateById">
        update t_shstock_in
        set whouse_id = #{param2}
        where in_ws_no = #{param1}
    </update>

    <update id="updateState">
        update t_shstock_in
        set status  = '作废'
        where in_application_id = #{applicationId}
    </update>

    <delete id="deleteById">
        delete from t_shstock_in where in_ws_no = #{warehousingEntryId}
    </delete>
</mapper>

