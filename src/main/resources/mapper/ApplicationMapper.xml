<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="team.bishe.wms.mapper.ApplicationMapper">


    <select id="selectAll" resultType="team.bishe.wms.bean.Application">
        select
        	 a.application_id,
        	 a.customer_id,
        	 a.customer_name,
        	 a.good_name,
        	 a.good_type,
        	 a.number,
        	 a.date,
        	 a.repository_id

        from
        	t_shstock_in_application a
    </select>

    <select id="selectByDate" resultType="team.bishe.wms.bean.Application">
		select
			 a.application_id,
        	 a.customer_id,
        	 a.customer_name,
        	 a.good_name,
        	 a.good_type,
        	 a.number,
        	 a.date,
        	 a.repository_id
		from
			t_shstock_in_application a
		where
			a.date between #{startDate} and #{endDate}
	</select>

    <select id="selectByUserId" resultType="team.bishe.wms.bean.Application">
		select
			 a.application_id,
        	 a.customer_id,
        	 a.customer_name,
        	 a.good_name,
        	 a.good_type,
        	 a.number,
        	 a.date,
        	 a.repository_id
		from
			t_shstock_in_application a
		where
			a.customer_id = #{cusid}
	</select>

    <select id="selectById" resultType="team.bishe.wms.bean.Application">
		select
			 application_id as id,
        	 customer_id as cusId,
        	 customer_name as cusName,
        	 good_name as goodsName,
        	 good_type as goodsType,
        	 number as number ,
        	 date as applicationDate,
        	 repository_id as repositoryId
		from
			t_shstock_in_application
		where
			application_id = #{id}
	</select>

	<select id="selectNumByName" resultType="int">
		select
			number
		from
			t_shstock_in_application
		where
			good_name = #{param1}
		and
			application_id = #{param2}
	</select>

	<select id="selectGoodsName" resultType="string">
		select
			good_name as goodsName
		from
			t_shstock_in_application
		where
			application_id = #{id}
	</select>

    <insert id="insert" parameterType="team.bishe.wms.bean.Application">
		insert into
				t_shstock_in_application(
				CUSTOMER_ID,
				GOOD_NAME,
				GOOD_TYPE,
				NUMBER,
				DATE,
				REPOSITORY_ID)
		values
				(#{cusId},#{goodsName},#{goodsType},#{number},#{applicationDate},#{repositoryId})
	</insert>

	<update id="update" parameterType="team.bishe.wms.bean.Application">
		update t_shstock_in_application
		set good_name = #{goodsName},
			good_type = #{goodsType},
			number = #{number}
		where application_id = #{id}
	</update>

	<update id="updateName" parameterType="team.bishe.wms.bean.Application">
		update t_shstock_in_application
		set customer_name =
			(select customer_name as name
        	from customer
        	where customer_id = #{id})
        where customer_id = #{id}
	</update>

	<update id="updateState" parameterType="team.bishe.wms.bean.Application">
		update t_shstock_in_application
		set state = '作废'
		where application_id = #{applicationId}
	</update>

	<update id="updateInwhouse" parameterType="team.bishe.wms.bean.Application">
		update t_shstock_in_application
		set state = '入库'
		where application_id = #{applicationId}
	</update>

	<delete id="deleteById">
    	delete from t_shstock_in_application
    	where id = #{id}
    </delete>
</mapper>
